/*! For license information please see functions.js.LICENSE.txt */
!function(){"use strict";var t={};function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(){var t,n,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function c(r,o,a,i){var c=o&&o.prototype instanceof s?o:s,l=Object.create(c.prototype);return e(l,"_invoke",function(r,e,o){var a,i,c,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,r){return a=n,i=0,c=t,p.n=r,u}};function y(r,e){for(i=r,c=e,n=0;!f&&s&&!o&&n<l.length;n++){var o,a=l[n],y=p.p,d=a[2];r>3?(o=d===e)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=y&&((o=r<2&&y<a[1])?(i=0,p.v=e,p.n=a[1]):y<d&&(o=r<3||a[0]>e||e>d)&&(a[4]=r,a[5]=e,p.n=d,i=0))}if(o||r>1)return u;throw f=!0,e}return function(o,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&y(l,d),i=l,c=d;(n=i<2?t:c)||!f;){a||(i?i<3?(i>1&&(p.n=-1),y(i,c)):p.n=c:p.v=c);try{if(s=2,a){if(i||(o="next"),n=a[o]){if(!(n=n.call(a,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,i<2&&(i=0)}else 1===i&&(n=a.return)&&n.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((n=(f=p.n<0)?c:r.call(e,p))!==u)break}catch(n){a=t,i=1,c=n}finally{s=1}}return{value:n,done:f}}}(r,a,i),!0),l}var u={};function s(){}function l(){}function f(){}n=Object.getPrototypeOf;var p=[][a]?n(n([][a]())):(e(n={},a,function(){return this}),n),y=f.prototype=s.prototype=Object.create(p);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,e(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t}return l.prototype=f,e(y,"constructor",f),e(f,"constructor",l),l.displayName="GeneratorFunction",e(f,i,"GeneratorFunction"),e(y),e(y,i,"Generator"),e(y,a,function(){return this}),e(y,"toString",function(){return"[object Generator]"}),(r=function(){return{w:c,m:d}})()}function e(t,n,r,o){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}e=function(t,n,r,o){function i(n,r){e(t,n,function(t){return this._invoke(n,r,t)})}n?a?a(t,n,{value:r,enumerable:!o,configurable:!o,writable:!o}):t[n]=r:(i("next",0),i("throw",1),i("return",2))},e(t,n,r,o)}function o(t,r,e){return(r=function(t){var r=function(t){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=n(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==n(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function a(t,n,r,e,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?n(u):Promise.resolve(u).then(e,o)}function i(t){return function(){var n=this,r=arguments;return new Promise(function(e,o){var i=t.apply(n,r);function c(t){a(i,e,o,c,u,"next",t)}function u(t){a(i,e,o,c,u,"throw",t)}c(void 0)})}}function c(t){return btoa(t)}t.d=function(n,r){for(var e in r)t.o(r,e)&&!t.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:r[e]})},t.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)};var u="https://gapi.zellwwf.com/rpc/";function s(t,n,r,e,o){return l.apply(this,arguments)}function l(){return(l=i(r().m(function t(n,e,a,i,c){var s,l,f,p,y;return r().w(function(t){for(;;)switch(t.n){case 0:return s=u+"RegisterDomain",l={payload:{analyzer_id:a,function_id:i,domain:o({},c,{items:[{user:a,shares:e,indices:n}]})}},f={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)},console.log("RegisterDomain Payload:",JSON.stringify(l)),t.n=1,fetch(s,f);case 1:return p=t.v,t.n=2,p.json();case 2:if(y=t.v,p.ok){t.n=3;break}throw new Error("API Error in registerDomain (".concat(p.status,"): ").concat(JSON.stringify(y)));case 3:return t.a(2,y)}},t)}))).apply(this,arguments)}function f(t,n,r){return p.apply(this,arguments)}function p(){return(p=i(r().m(function t(n,e,o){var a,i,c,s,l,f;return r().w(function(t){for(;;)switch(t.n){case 0:return a=u+"ComputePrivately",i={payload:{user:n,function_id:e,data_collection_map:o}},c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},console.log("ComputePrivately Payload:",JSON.stringify(i)),t.n=1,fetch(a,c);case 1:return s=t.v,t.n=2,s.json();case 2:if(l=t.v,s.ok){t.n=3;break}throw new Error("API Error in compute_privately (".concat(s.status,"): ").concat(JSON.stringify(l)));case 3:if(!(l.clear_data&&Array.isArray(l.clear_data)&&l.clear_data.length>0)){t.n=4;break}return f=parseFloat(l.clear_data[0]),t.a(2,f);case 4:throw new Error("Invalid response format from server. 'clear_data' is missing or empty.");case 5:return t.a(2)}},t)}))).apply(this,arguments)}function y(t,n,r,e){return d.apply(this,arguments)}function d(){return(d=i(r().m(function t(n,e,o,a){var i,u,l,p,y,d,m,v,g,h,b,w,O;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e){t.n=1;break}return t.a(2,"#ERROR: Please provide a valid username cell.");case 1:if(i=e.toString()){t.n=2;break}return t.a(2,"#ERROR: Owner name in cell is empty.");case 2:if(o&&0!==o.length&&Array.isArray(o[0])){t.n=3;break}return t.a(2,"#ERROR: Please provide a valid indices range.");case 3:if(a&&0!==a.length&&Array.isArray(a[0])){t.n=4;break}return t.a(2,"#ERROR: Please provide a valid data range.");case 4:if(o.length===a.length){t.n=5;break}return t.a(2,"#ERROR: Indices and data ranges must have the same number of rows.");case 5:for(console.log("userNameCell:",e),console.log("indicesRange:",o),console.log("dataRanges:",a),t.p=6,console.log("Owner Username: ".concat(i)),u=[],l=[],p=0;p<o.length;p++)y=o[p],d=a[p],m=y[0],v=d[0],m&&v&&(u.push(c(m.toString())),l.push(v.toString().split("|")));if(console.log("All Indices (base64):",u),console.log("All Shares:",l),console.log("Found ".concat(u.length," valid rows of data to process in the selected range.")),0!==u.length){t.n=7;break}return t.a(2,"#ERROR: No valid data found in the provided range.");case 7:return g=l.flat(),t.n=8,s(u,g,i,n,"x");case 8:if(h=t.v,console.log("Full API Response from registerDomain:",JSON.stringify(h,null,2)),b=h.data_collection_map){t.n=9;break}throw new Error("Failed to get data_collection_map from registration step.");case 9:return t.n=10,f(i,n,b);case 10:return w=t.v,t.a(2,w);case 11:return t.p=11,O=t.v,console.error(O),t.a(2,"#ERROR: ".concat(O.message))}},t,null,[[6,11]])}))).apply(this,arguments)}function m(t,n,r){return v.apply(this,arguments)}function v(){return(v=i(r().m(function t(n,e,o){return r().w(function(t){for(;;)if(0===t.n)return t.a(2,y("sum",n,e,o))},t)}))).apply(this,arguments)}function g(t,n,r){return h.apply(this,arguments)}function h(){return(h=i(r().m(function t(n,e,o){return r().w(function(t){for(;;)if(0===t.n)return t.a(2,y("avg",n,e,o))},t)}))).apply(this,arguments)}CustomFunctions.associate("NERA.SUM",m),CustomFunctions.associate("NERA.AVG",g),CustomFunctions.associate("SUM",m),CustomFunctions.associate("AVG",g)}();
//# sourceMappingURL=functions.js.map